var m=Object.defineProperty,L=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var E=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&E(e,r,t[r]);if(y)for(var r of y(t))N.call(t,r)&&E(e,r,t[r]);return e},g=(e,t)=>L(e,p(t));const P=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,$=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,j=/^["{[]|^-?[0-9][0-9.]{0,14}$/;function S(e,t){if(!(e==="__proto__"||e==="constructor"))return t}function F(e){if(typeof e!="string")return e;const t=e.toLowerCase();if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;if(t==="nan")return NaN;if(t==="infinity")return 1/0;if(t!=="undefined"){if(!j.test(e))return e;try{return P.test(e)||$.test(e)?JSON.parse(e,S):JSON.parse(e)}catch{return e}}}const O=/#/g,T=/&/g,U=/=/g,_=/\+/g,x=/%5B/gi,Q=/%5D/gi,I=/%5E/gi,B=/%60/gi,H=/%7B/gi,K=/%7C/gi,D=/%7D/gi,J=/%20/gi;function W(e){return encodeURI(""+e).replace(K,"|").replace(x,"[").replace(Q,"]")}function l(e){return W(e).replace(_,"%2B").replace(J,"+").replace(O,"%23").replace(T,"%26").replace(B,"`").replace(H,"{").replace(D,"}").replace(I,"^")}function d(e){return l(e).replace(U,"%3D")}function R(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function k(e){return R(e.replace(_," "))}function G(e=""){const t={};e[0]==="?"&&(e=e.substr(1));for(const r of e.split("&")){const n=r.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const o=R(n[1]);if(o==="__proto__"||o==="constructor")continue;const c=k(n[2]||"");t[o]?Array.isArray(t[o])?t[o].push(c):t[o]=[t[o],c]:t[o]=c}return t}function M(e,t){return t?Array.isArray(t)?t.map(r=>`${d(e)}=${l(r)}`).join("&"):`${d(e)}=${l(t)}`:d(e)}function V(e){return Object.keys(e).map(t=>M(t,e[t])).join("&")}function Y(e,t=!1){return/^\w+:\/\/.+/.test(e)||t&&/^\/\/[^/]+/.test(e)}const z=/\/$|\/\?/;function X(e="",t=!1){return t?z.test(e):e.endsWith("/")}function Z(e="",t=!1){if(!t)return e.endsWith("/")?e:e+"/";if(X(e,!0))return e||"/";const[r,...n]=e.split("?");return r+"/"+(n.length?`?${n.join("?")}`:"")}function q(e=""){return e.startsWith("/")}function v(e=""){return(q(e)?e.substr(1):e)||"/"}function ee(e,t){const r=b(e),n=h(h({},G(r.search)),t);return r.search=V(n),ne(r)}function te(e){return e&&e!=="/"}function re(e,...t){let r=e||"";for(const n of t.filter(te))r=r?Z(r)+v(n):n;return r}function b(e="",t){if(!Y(e,!0))return t?b(t+e):C(e);const[r="",n,o]=(e.match(/([^:/]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[c="",s=""]=(o.match(/([^/?]*)(.*)?/)||[]).splice(1),{pathname:a,search:i,hash:f}=C(s);return{protocol:r,auth:n?n.substr(0,n.length-1):"",host:c,pathname:a,search:i,hash:f}}function C(e=""){const[t="",r="",n=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:n}}function ne(e){const t=e.pathname+(e.search?(e.search.startsWith("?")?"":"?")+e.search:"")+e.hash;return e.protocol?e.protocol+"//"+(e.auth?e.auth+"@":"")+e.host+t:t}class ce extends Error{constructor(){super(...arguments);this.name="FetchError"}}function oe(e,t,r){let n="";e&&r&&(n=`${r.status} ${r.statusText} (${e.toString()})`),t&&(n=`${t.message} (${n})`);const o=new ce(n);return Object.defineProperty(o,"request",{get(){return e}}),Object.defineProperty(o,"response",{get(){return r}}),Object.defineProperty(o,"data",{get(){return r&&r.data}}),o}const w=["patch","post","put"];function se(e,t,r){const n=t.toLowerCase();if(e.headers=e.headers||{},"set"in e.headers)e.headers.set(n,r);else if(Array.isArray(e.headers)){const o=e.headers.find(([c])=>c.toLowerCase()===n);o?o[1]=r:e.headers.push([n,r])}else{const o=Object.keys(e.headers).find(c=>c.toLowerCase()===n);e.headers[o||n]=r}}function ae({fetch:e}){function t(o,c,s,a){if(c.retry!==!1){const f=w.includes((c.method||"").toLowerCase()),u=typeof c.retry=="number"?c.retry:f?0:1;if(u>0)return r(o,g(h({},c),{retry:u-1}))}const i=oe(o,s,a);throw Error.captureStackTrace(i,r),i}const r=async function(c,s={}){if(typeof c=="string"){s.baseURL&&(c=re(s.baseURL,c)),s.params&&(c=ee(c,s.params));const u=w.includes((s.method||"").toLowerCase());s.body&&s.body.toString()==="[object Object]"&&u&&(s.body=JSON.stringify(s.body),se(s,"content-type","application/json"))}const a=await e(c,s).catch(u=>t(c,s,u,void 0)),i=await a.text(),f=s.parseResponse||F;return a.data=f(i),a.ok?a:t(c,s,void 0,a)},n=function(c,s){return r(c,s).then(a=>a.data)};return n.raw=r,n}const ie=function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")},ue=ie().fetch||(()=>Promise.reject(new Error("[ohmyfetch] global.fetch is not supported!"))),he=ae({fetch:ue});export{he as $};
